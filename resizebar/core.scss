@mixin resizebar(
  $size: auto,
  $controller: ".resizebar_controller",
  $container: ".resizebar_container",
  $delimiter: "__",
  // Big enough values to have controller not less than container, while '100%' is not working
  $height: 100vh,
  $width: 100vw
) {
  // #{$controller} {
  // }

  #{$container}#{$delimiter} {
    // By default scrolls are at right and bottom sides. Obvious transform for desired effect without
    &left > #{$controller} {
      transform: scaleX(-1);
    }
    &top > #{$controller} {
      transform: scaleY(-1);
    }

    &left {
      grid-template-areas: 'Bar Content';
      grid-template-columns: minmax($size, 1em) min-content /*NB! Not 1fr*/;
    }
    &right {
      grid-template-areas: 'Content Bar';
      grid-template-columns: 1fr $size;
      & > #{$controller} {
        justify-self: right;
      }  
    }
    &top {
      grid-template-areas: 'Bar' 'Content';
      grid-template-rows: $size 1fr;
    }
    &bottom {
      grid-template-areas: 'Content' 'Bar';
      grid-template-rows: 1fr $size;
      & > #{$controller} {
        align-self: end;
      }  
    }

    $sides: left, right, top, bottom;
    @each $side in $sides {
      &#{$side} {
        // Container takes controller's width-height and propagate to children. Be careful with display: content;
        overflow: hidden;
        display: grid;
        &::before, &::after {
          grid-area: Bar;
          // NB: 'Controller' skin should be transparent for click- don't forget if own element is used 
          pointer-events: none;
        }

        & > *:not(#{$controller}) {
          grid-area: Content;
        }

        & > #{$controller} {  
          @include resizebar-controller-common();
          $orientation: if($side == left or $side == right, horizontal, vertical); 
          resize: $orientation;
          @if ($orientation == horizontal) {
            min-width: $size;
            &::-webkit-scrollbar {
              width: #{$size};
              height: #{$height}; 
            }  
          } @else {
            min-height: $size;
            &::-webkit-scrollbar {
              width: #{$width};
              height: #{$size};
            }
          }
        }
      }
    }    
  }
}

@mixin resizebar-controller-common {
  grid-area: 1 / 1 / -1 / -1;

  // Check resizer.html to see why other options are not satisfying  
  overflow: scroll;

  // @content;
  // background-color: transparent;
  opacity: 0;

  // @content;

  &::-webkit-resizer {
    // opacity: 0;
    // background-color: transparent;
    // color: transparent;
  }  
} 