@import "../calc";

@function -light-value($index, $start, $ending, $step-k, $step: $-step) {
  @return e(
    $start,
    "+",
    m($step, $step-k, $index, $ending),
    true
  );
}

@function on_white(
  $index: 0,
  $acted: false,
  $hue: $-hue,
  $saturation: $-saturation,
  $light: $-light
) {
  $sat: 0;
  $light-end: 1;

  @if ($acted) {
    /* (0.96 - 0.02 * $index) */
    $sat: $saturation;
    $light-end: $light;
  }

  @return hsl-(
    $hue,
    $sat,
    -light-value(
      $index,
      1,
      $light-end,
      -1
    )
  );
}


@function on_color(
  $index: 0,
  $acted: false,
  $hue: $-hue,
  $saturation: $-saturation,
  $light: $-light,
  $magic-saturation: $-magic-saturation
) {
  $sat: if($index == 0, $saturation, $magic-saturation); 

  @return hsl-(
    $hue,
    $sat,
    -light-value(
      if(
        $acted,
        e($index, "+", 1, true),
        $index
      ),
      $light,
      e(1, "-", $light),
      2
    )      
  );
}

@function on_surface(
  $index: 0,
  $red: $-main-red,
  $green: $-main-green,
  $blue: $-main-blue
) {
  @return rgb-(
    $red,
    $green,
    $blue,
    m($index, $-step)
  )
}
